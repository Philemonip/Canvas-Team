<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title></title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./assets/css/style.css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
    integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous">
  </script>
</head>

<body>
  <div id='divider' style="border: 1px solid white; height: 100vh; width: 100vw; display:flex; flex-direction: column;">
    <div style="border: 1px solid white; height: 38vh; width: 100vw; display:flex">
      <div style="border: 1px solid white; width: 40%; display:flex; flex-direction: column;">
        <div style="border: 1px solid white; width: 100%; ">
          <h1 style="font-size: 30px">Paper Canvas</h1>
        </div>
        <div style="border: 1px solid white; width: 100%; height: 100%; display:flex; flex-direction: row;">
          <div id="sizeMenu" style="border: 1px solid white; display: flex; flex-direction: column; text-align: center; align-items: center; justify-content: space-around;">
            <p>Size</p>
            <div class="showSize"><div class="sizeImage"></div></div>
            <div class="sizeSlider"><input type="range" min="1" max="51" value="5" step="2" class="slider" id="brushSize"></div>
          </div>
          <div id="colorPalette" style="border: 1px solid white; height:100%; display: flex; flex-direction: column; justify-content: space-evenly;">
            <div style="display: flex; flex-direction: column; align-items: center;">
              <div>
                <p>Stroke</p>
              </div>
              <div>
              <input type="button" class="jscolor colorButton" value="#000000" onchange="canvasSettings.changeStroke(this.jscolor)" id="colorStroke"></input>
              </div>
            </div>
            <div style="display: flex; flex-direction: column; justify-content: center;">
              <div>
                <p>Fill</p>
              </div>
              <div>
                <input type="button" class="jscolor colorButton" value="#ffffff" onchange="canvasSettings.changeFill(this.jscolor)" id="colorFill"></input>
              </div>  
            </div>
          </div>
        </div>
      </div>
      <div style="border: 1px solid white; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%;">
        <div style="border: 1px solid white;">
          <button type="button" class="btn btn-secondary function-btn" id="drawing-line" title="Pen (Free Draw)">
            <img class="icon-img" src="./assets/images/pen.svg"/>
          </button>
          <button type="button" class="btn btn-secondary function-btn" id="drawing-rectangle" title="Rectangle">
            <img class="icon-img" src="./assets/images/rectangle.svg"/>
          </button>
          <button type="button" class="btn btn-secondary function-btn" id="drawing-square" title="Square">
            <img class="icon-img" src="./assets/images/square.svg"/>
          </button>
          <button type="button" class="btn btn-secondary function-btn" id="drawing-straightline" title="Straight Line">
            <img class="icon-img" src="./assets/images/line.svg"/>
          </button>
        </div>
        <div style="border: 1px solid white;">
          <button type="button" class="btn btn-secondary function-btn" id="drawing-curve" title="Curve">
            <img class="icon-img" src="./assets/images/curve.svg"/>
          </button>
          <button type="button" class="btn btn-secondary function-btn" id="drawing-furline" title="Jointed Line">
            <img class="icon-img" src="./assets/images/jointed-line.svg"/>
          </button>
          <button type="button" class="btn btn-secondary function-btn" id="drawing-ellipse" title="Oval">
            <img class="icon-img" src="./assets/images/oval.svg"/>
          </button>
          <button type="button" class="btn btn-secondary function-btn" id="drawing-circle" title="Circle">
            <img class="icon-img" src="./assets/images/circle.svg"/>
          </button>
        </div>
        <div style="border: 1px solid white;">
          <button type="button" class="btn btn-secondary function-btn" id="drawing-bubbles" title="Bubbles">
            <img class="icon-img" src="./assets/images/bubbles.svg"/>
          </button> 
          <button type="button" class="btn btn-secondary function-btn" id="drawing-polygon" title="Polygon">
            <img class="icon-img" src="./assets/images/polygon.svg"/>
          </button>
          <button type="button" class="btn btn-secondary function-btn" id="drawing-shadowline" title="Spray Paint">
            <img class="icon-img" src="./assets/images/spray.svg"/>
          </button>
          <button type="button" class="btn btn-secondary function-btn" id="drawing-textbox" title="Text">
            <img class="icon-img" src="./assets/images/text.svg"/>
          </button>
        </div>
        <div style="border: 1px solid white;">
          <button type="button" class="btn btn-dark function-btn" id="drawing-eraser" title="Eraser">
            <img class="icon-img" src="./assets/images/rubber.svg"/>
          </button>
          <button type="button" class="btn btn-dark function-btn" id="save-image" title="Save">
            <img class="icon-img" src="./assets/images/save.svg"/>
          </button>
          <button type="button" id="redo" class="btn btn-dark function-btn" title="Redo">
            <img class="icon-img" src="./assets/images/redo.svg"/>
          </button>
          <button type="button" id="undo" class="btn btn-warning function-btn" title="Undo">
            <img class="icon-img" src="./assets/images/undo.svg"/>
          </button>
        </div>
        <div style="border: 1px solid white;">
          <button type="button" class="btn btn-danger function-btn" id="drawing-clear" title="Clear All">
            <img class="icon-img" src="./assets/images/trash.svg"/>
          </button>
        </div>
    </div>
    
    </div>
    <div style="margin: 0 !important;border: 1px solid white; height: 62vh; width: 100vw;">
      <div class="col-12" id="canvas-container">
        <canvas
          id="canvas-real"
          class="canvas"
          height="200px"
          width="200px"
        ></canvas>
        <canvas
          id="canvas-draft"
          class="canvas"
          height="200px"
          width="200px"
        ></canvas>
      </div>
    </div>
  </div>


    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <!-- js libraries -->
    <script src="./assets/javascript/jscolor.min.js"></script>
    <!-- drawing functions -->
    <!-- <script src="./assets/javascript/resizer.js" type="text/javascript"></script> -->
    <script src="./assets/javascript/canvas-common.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-line.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-straightline.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-arrowline.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-shadowline.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-fanlike.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-furline.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-curve.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-bubbles.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-rectangle.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-square.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-circle.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-ellipse.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-polygon.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-clear.js" type="text/javascript"></script>
    <script src="./assets/javascript/drawing-eraser.js" type="text/javascript"></script>
    <script
    src="./assets/javascript/drawing-textbox.js"
    type="text/javascript" ></script>
    
    <script type="text/javascript">
      $(() => {
        currentFunction = new DrawingLine(contextReal)
        $("#drawing-rectangle").click(() => {
          currentFunction = new DrawingRectangle(contextReal, contextDraft);
        });

        $("#drawing-square").click(() => {
          currentFunction = new DrawingSquare(contextReal, contextDraft);
        });

        $("#drawing-line").click(() => {
          currentFunction = new DrawingLine(contextReal);
        });

        $("#drawing-straightline").click(() => {
          currentFunction = new DrawingStraightLine(contextReal, contextDraft);
        })

        $("#drawing-arrow-line").click(() => {
          currentFunction = new DrawingArrowLine(contextReal, contextDraft);
        })

        $("#drawing-shadowline").click(() => {
          currentFunction = new DrawingShadowLine(contextReal);
        })

        $("#drawing-fanlike").click(() => {
          currentFunction = new DrawingFanlike(contextReal);
        })

        $("#drawing-furline").click(() => {
          currentFunction = new DrawingFurLine(contextReal);
        })

        $("#drawing-curve").click(() => {
          currentFunction = new DrawingCurve(contextReal, contextDraft);
        })

        $("#drawing-bubbles").click(() => {
          currentFunction = new DrawingBubbles(contextReal);
        })

        $("#drawing-circle").click(() => {
          currentFunction = new DrawingCircle(contextReal, contextDraft);
        });
        $("#drawing-ellipse").click(() => {
          currentFunction = new DrawingEllipse(contextReal, contextDraft);
        });

        $("#drawing-polygon").click(() => {
          currentFunction = new DrawingPolygon(contextReal, contextDraft);
        });
        $('#drawing-clear').on("click", function () {
          if (confirm('Are you sure you want to clear the canvas?')) {
            clearCanvas();
        } else {
          return;
        }
        })
        $('#drawing-eraser').on("click", function () {
          currentFunction = new DrawingEraser(contextReal, contextDraft);
        })
        $("#drawing-textbox").click(() => {
        currentFunction = new DrawingTextbox(contextReal);  
        })
        $('#save-image').on("click", function (e) {
          let image = canvasReal.toDataURL();
          let link = document.createElement("a");
          link.download = "image.png";
          link.href = image;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        })
        $('#undo').on('click', function(){
          canvasSettings.undoObject.undoAction();
        });
        $('#redo').on("click", function(){
          canvasSettings.undoObject.redoAction();
        }); 
      })

    </script>
</body>

</html>