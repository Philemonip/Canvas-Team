<!DOCTYPE html>
<html class="no-js">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title></title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./assets/css/style.css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
    integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous">
    </script>
</head>

<body class="container-fluid">
  <div class="col-12" id='divider'>
    <div class="col-2">
      <div class="row">
        <div class="row" id="logo">
          <h1>Paper Canvas</h1>
        </div>
      </div>
      <div id="settings" class="row">
        <div classid="sizeMenu">
          <p style="font-weight: bold;">Size</p>
          <div class="showSize">
            <div class="sizeImage"></div>
          </div>
          <div class="sizeSlider"><input type="range" min="1" max="51" value="5" step="2" class="slider" id="brushSize">
          </div>
        </div>
        <div id="colorPalette">
          <table class="colorPicker">
            <tr>
              <th>
                <p>Stroke</p>
              </th>
              <th>
                <input type="button" class="jscolor colorButton" alpha="1" value="#000000"
                  onchange="canvasSettings.changeStroke(this.jscolor)" id="colorStroke"></input>
              </th>
            </tr>
            <tr>
              <th>
                <p>Fill</p>
              </th>
              <th>
                <input type="button" class="jscolor colorButton" alpha="1" value="#ffffff"
                  onchange="canvasSettings.changeFill(this.jscolor)" id="colorFill"></input>
              </th>
            </tr>
          </table>
        </div>
      </div>
      <div class="row" id="buttonrow">
        <button type="button" class="btn btn-secondary function-btn" id="drawing-line" title="Pen (Free Draw)">
          <img class="icon-img" src="./assets/images/pen.svg" />
        </button>
        <button type="button" class="btn btn-secondary function-btn" id="drawing-rectangle" title="Rectangle">
          <img class="icon-img" src="./assets/images/rectangle.svg" />
        </button>
        <button type="button" class="btn btn-secondary function-btn" id="drawing-square" title="Square">
          <img class="icon-img" src="./assets/images/square.svg" />
        </button>
      </div>
      <div class="row" id="buttonrow">
        <button type="button" class="btn btn-secondary function-btn" id="drawing-straightline" title="Straight Line">
          <img class="icon-img" src="./assets/images/line.svg" />
        </button>
        <button type="button" class="btn btn-secondary function-btn" id="drawing-curve" title="Curve">
          <img class="icon-img" src="./assets/images/curve.svg" />
        </button>
        <button type="button" class="btn btn-secondary function-btn" id="drawing-furline" title="Jointed Line">
          <img class="icon-img" src="./assets/images/jointed-line.svg" />
        </button>
      </div>
      <div class="row" id="buttonrow">
        <button type="button" class="btn btn-secondary function-btn" id="drawing-ellipse" title="Oval">
          <img class="icon-img" src="./assets/images/oval.svg" />
        </button>
        <button type="button" class="btn btn-secondary function-btn" id="drawing-circle" title="Circle">
          <img class="icon-img" src="./assets/images/circle.svg" />
        </button>
        <button type="button" class="btn btn-secondary function-btn" id="drawing-bubbles" title="Bubbles">
          <img class="icon-img" src="./assets/images/bubbles.svg" />
        </button>
      </div>
      <div class="row" id="buttonrow">
        <button type="button" class="btn btn-secondary function-btn" id="drawing-polygon" title="Polygon">
          <img class="icon-img" src="./assets/images/polygon.svg" />
        </button>
        <button type="button" class="btn btn-secondary function-btn" id="drawing-shadowline" title="Spray Paint">
          <img class="icon-img" src="./assets/images/spray.svg" />
        </button>
        <button type="button" class="btn btn-secondary function-btn" id="drawing-textbox" title="Text">
          <img class="icon-img" src="./assets/images/text.svg" />
        </button>
      </div>
      <div class="row" id="buttonrow">
        <button type="button" class="btn btn-dark function-btn" id="drawing-eraser" title="Eraser">
          <img class="icon-img" src="./assets/images/rubber.svg" />
        </button>
        <button type="button" id="redo" class="btn btn-dark function-btn" title="Redo">
          <img class="icon-img" src="./assets/images/redo.svg" />
        </button>
        <button type="button" id="undo" class="btn btn-warning function-btn" title="Undo">
          <img class="icon-img" src="./assets/images/undo.svg" />
        </button>
      </div>
      <div class="row" id="buttonrow">
        <button type="button" class="btn btn-success " id="drawing-emoji">
          <i class="far fa-lg fa-smile-wink"></i>
        </button>
        <button type="button" class="btn btn-dark function-btn" id="save-image" title="Save">
          <img class="icon-img" src="./assets/images/save.svg" />
        </button>
        <button type="button" class="btn btn-danger function-btn" id="drawing-clear" title="Clear All">
          <img class="icon-img" src="./assets/images/trash.svg" />
        </button>
      </div>
      <div class="row" id="emojirow">
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-1"><img class="emoji-image" id="pic1"
            src="./assets/images/emojis/1.png">
        </button>
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-2"><img class="emoji-image" id="pic2"
            src="./assets/images/emojis/2.png">
        </button>
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-3"><img class="emoji-image" id="pic3"
            src="./assets/images/emojis/3.png">
        </button>
      </div>
      <div class="row" id="emoji-inside-row">
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-4"><img class="emoji-image" id="pic4"
            src="./assets/images/emojis/4.png">
        </button>
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-5"><img class="emoji-image" id="pic5"
            src="./assets/images/emojis/5.png">
        </button>
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-6"><img class="emoji-image" id="pic6"
            src="./assets/images/emojis/6.png">
        </button>
      </div>
      <div class="row" id="emoji-inside-row">
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-7"><img class="emoji-image" id="pic7"
            src="./assets/images/emojis/7.png">
        </button>
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-8"><img class="emoji-image" id="pic8"
            src="./assets/images/emojis/8.png">
        </button>
        <button type="button" class="emoji-square-mini" id="emoji-square-mini-9"><img class="emoji-image" id="pic9"
            src="./assets/images/emojis/9.png">
        </button>
      </div>

    </div>
    <div class="col-10" id="canvas-container">
      <canvas id="canvas-real" class="canvas" height="500px" width="800px"></canvas>
      <canvas id="canvas-draft" class="canvas" height="500px" width="800px"></canvas>
      <input id="textInput" name="inputField" value=""></input>
    </div>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
  <!-- js libraries -->
  <script src="./assets/javascript/jscolor.min.js"></script>
  <!-- drawing functions -->
  <script src="./assets/javascript/canvas-common.js" type="text/javascript"></script>
  <script src="./assets/javascript/undo.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-line.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-straightline.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-shadowline.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-furline.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-curve.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-bubbles.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-rectangle.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-square.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-circle.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-ellipse.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-polygon.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-clear.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-eraser.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-emoji.js" type="text/javascript"></script>
  <script src="./assets/javascript/drawing-textbox.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(() => {
      currentFunction = new DrawingLine(contextReal)
      $("#drawing-rectangle").click(() => {
        currentFunction = new DrawingRectangle(contextReal, contextDraft);
      });

      $("#drawing-square").click(() => {
        currentFunction = new DrawingSquare(contextReal, contextDraft);
      });

      $("#drawing-line").click(() => {
        currentFunction = new DrawingLine(contextReal);
      });

      $("#drawing-straightline").click(() => {
        currentFunction = new DrawingStraightLine(contextReal, contextDraft);
      })

      $("#drawing-arrow-line").click(() => {
        currentFunction = new DrawingArrowLine(contextReal, contextDraft);
      })

      $("#drawing-shadowline").click(() => {
        currentFunction = new DrawingShadowLine(contextReal);
      })

      $("#drawing-furline").click(() => {
        currentFunction = new DrawingFurLine(contextReal);
      })

      $("#drawing-emoji").click(() => {
        currentFunction = new DrawingEmoji(contextReal, contextDraft);
        $(".emoji-square-mini").addClass("permahover")
        $('#emoji-square-mini-1').trigger('click');
      })

      $('.emoji-image').click(function () {
        styleGuide.emojiSource = $(this)[0];
      })

      $("#brushSize").change(function () {
        styleGuide.emojiLength = (($('#brushSize').val() - 1) * 2.8 + 10);
      })

      $(".function-btn").click(() => {
        $(".emoji-square-mini").removeClass("permahover");
      })

      $("#drawing-curve").click(() => {
        currentFunction = new DrawingCurve(contextReal, contextDraft);
      })

      $("#drawing-bubbles").click(() => {
        currentFunction = new DrawingBubbles(contextReal);
      })

      $("#drawing-circle").click(() => {
        currentFunction = new DrawingCircle(contextReal, contextDraft);
      });
      $("#drawing-ellipse").click(() => {
        currentFunction = new DrawingEllipse(contextReal, contextDraft);
      });

      $("#drawing-polygon").click(() => {
        currentFunction = new DrawingPolygon(contextReal, contextDraft);
      });
      $('#drawing-clear').on("click", function () {
        if (confirm('Are you sure you want to clear the canvas?')) {
          clearCanvas();
        } else {
          return;
        }
      })
      $('#drawing-eraser').on("click", function () {
        currentFunction = new DrawingEraser(contextReal, contextDraft);
      })
      $("#drawing-textbox").click(() => {
        currentFunction = new DrawingTextbox(contextReal);
      })
      $('#save-image').on("click", function (e) {
        let image = canvasReal.toDataURL();
        let link = document.createElement("a");
        link.download = "image.png";
        link.href = image;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      })
      //Initiate background
      contextReal.fillStyle = "white";
      contextReal.fillRect(0, 0, canvasReal.width, canvasReal.height);
      //undoObject's primal state
      canvasSettings.undoObject.states[canvasSettings.undoObject.actionCount] = new Image();
      canvasSettings.undoObject.states[canvasSettings.undoObject.actionCount].src = canvasReal.toDataURL();
      canvasSettings.undoObject.actionCount++;
    })

  </script>
</body>

</html>